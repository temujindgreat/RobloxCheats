local function createDropdownMenu(parent, dropdownName, options, defaultOption, callback)
    local dropdown = Instance.new("Frame")
    dropdown.Name = "Dropdown"
    dropdown.Parent = parent
    dropdown.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    dropdown.Size = UDim2.new(0.5, 0, 0, 30)
    dropdown.Position = UDim2.new(0.25, 0, 0.5, 0)
    dropdown.ClipsDescendants = true

    local uiCorner = Instance.new("UICorner")
    uiCorner.CornerRadius = UDim.new(0, 5)
    uiCorner.Parent = dropdown

    local label = Instance.new("TextLabel")
    label.Name = "Label"
    label.Parent = dropdown
    label.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    label.BackgroundTransparency = 1
    label.Size = UDim2.new(1, -20, 1, 0)
    label.Font = Enum.Font.SourceSans
    label.Text = dropdownName
    label.TextColor3 = Color3.fromRGB(0, 0, 0)
    label.TextScaled = true
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Position = UDim2.new(0, 10, 0, 0)

    local button = Instance.new("TextButton")
    button.Name = "Button"
    button.Parent = dropdown
    button.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    button.BackgroundTransparency = 1
    button.Size = UDim2.new(1, 0, 1, 0)
    button.Font = Enum.Font.SourceSans
    button.Text = "â–¼"
    button.TextColor3 = Color3.fromRGB(0, 0, 0)
    button.TextScaled = true
    button.TextXAlignment = Enum.TextXAlignment.Right

    local itemsFrame = Instance.new("Frame")
    itemsFrame.Name = "ItemsFrame"
    itemsFrame.Parent = dropdown
    itemsFrame.BackgroundColor3 = Color3.fromRGB(240, 240, 240)
    itemsFrame.Size = UDim2.new(1, 0, 0, #options * 30)
    itemsFrame.Position = UDim2.new(0, 0, 1, 0)
    itemsFrame.Visible = false

    local uiListLayout = Instance.new("UIListLayout")
    uiListLayout.Parent = itemsFrame
    uiListLayout.SortOrder = Enum.SortOrder.LayoutOrder

    for _, option in ipairs(options) do
        local itemButton = Instance.new("TextButton")
        itemButton.Name = option
        itemButton.Parent = itemsFrame
        itemButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        itemButton.Size = UDim2.new(1, 0, 0, 30)
        itemButton.Font = Enum.Font.SourceSans
        itemButton.Text = option
        itemButton.TextColor3 = Color3.fromRGB(0, 0, 0)
        itemButton.TextScaled = true
        itemButton.MouseButton1Click:Connect(function()
            label.Text = option
            itemsFrame.Visible = false
            dropdown:TweenSize(UDim2.new(0.5, 0, 0, 30), "Out", "Quad", 0.3, true)
            callback(option)
        end)
    end

    button.MouseButton1Click:Connect(function()
        itemsFrame.Visible = not itemsFrame.Visible
        if itemsFrame.Visible then
            dropdown:TweenSize(UDim2.new(0.5, 0, 0, #options * 30 + 30), "Out", "Quad", 0.3, true)
        else
            dropdown:TweenSize(UDim2.new(0.5, 0, 0, 30), "Out", "Quad", 0.3, true)
        end
    end)

    -- Set the default option
    label.Text = defaultOption
end

-- Example usage
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

createDropdownMenu(screenGui, "Select Item", {"Option 1", "Option 2", "Option 3"}, "Option 1", function(selected)
    print("Selected:", selected)
end)
